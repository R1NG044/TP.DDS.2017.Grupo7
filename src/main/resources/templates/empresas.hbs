<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>SISTEMA DE APOYO A DECISIONES</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
	<div id="contenedor">
		<div id="cabecera" align="center" ><h1 >SISTEMA DE APOYO A DECISIONES</h1></div>
		
		<div id="menu" align="center">
			<nav class="nav-menu">
				<ul class="clearfix">
					<li><a href="/index" class="linksMenu">Home</a></li>
					<li><a href="/empresas" class="linksMenu">Empresas</a></li>
					<li><a href="/indicadores" class="linksMenu">Indicadores</a></li>
					<li><a href="/metodologias" class="linksMenu">Metodolog&iacuteas</a></li>
					<li><a href="/logout" class="linksMenu"> Cerrar Sesi&oacuten</a></li>	
				</ul>
			</nav>
		</div>
		
		<div id="submenu">
			<br>
			<p class="linksActual">Cargar Empresa</p>
			<p class="linksSubmenu"><a href="/empresas/consultaDeValores" class="links">Consultar Cuentas</a></p>
		</div>

		<div id="contenido" align="center"> <br><br>
			<table align="center" width="400" height="100">
			<tr>
				<td align="center" bgcolor="#999999" class="style64" HEIGHT="50">
					<label><font color=#FFFFFF>Adjuntar Archivo</font></label>
				</td>
			</tr>
			<tr>
				<td align="center" height="50" >
					<form id="form" action="/empresas/upload" method="POST" enctype=" multipart/form-data" >
						<input name="archivo_json" type="file" class="botones" id="archivo_json" value="archivo_json" />
						<br><br>
						<input type="submit" value="Enviar" id="button"/>
					</form>
						
				<script>
					
					function mandarForm(form){
					/* Creamos un objeto FormData que es un formulario con 	enctype=multipart/form-data 
					y le pasamos como parametro el formulario HTML */
						var Data = new FormData(form);
						
						alert(Data);
								
						/* Creamos el objeto que hara la petici?n AJAX al servidor, debemos de validar si existe el 	objeto " XMLHttpRequest" ya que en internet explorer viejito no esta, y si no esta usamos 
						"ActiveXObject" */
								
						if(window.XMLHttpRequest) {
							var Req = new XMLHttpRequest();
						}else if(window.ActiveXObject) {
							var Req = new ActiveXObject("Microsoft.XMLHTTP");
						}
								
						//Pasandole la url a la que haremos la peticion
						Req.open("POST", "/empresas/upload", true);
								
						/* Le damos un evento al request, esto quiere decir que cuando
						termine de hacer la peticion, se ejecutara este fragmento de
						codigo */

								
						Req.onload = function(Event) {
						//Validamos que el status http sea  ok
							if (Req.status == 200) {

							/*Como la info de respuesta vendra en JSON 

										la parseamos */
								alert(Req.responseText);
								//var st = JSON.parse(Req.responseText);
								var st = Req.responseText;
										
								if(st.success){

							/* Codigo si el return fue true */
								}else{
							/* Codigo si el return fue false */

								}
							} else {
								console.log(Req.status); //Vemos que paso.
							}
						};	  
								
								//Enviamos la petici?n
						Req.send(Data);
					}
				</script>
				</td>
			</tr>
				
		</table>
			
		<p align="center"><font size=2 color=#2F4F4F>** El archivo debe estar en formato .json</font></p>
			
		</div>	
			
		
	</div>
	<!-- JQuery -->
		<script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
		<!-- Bootstrap tooltips -->
		<script type="text/javascript" src="/js/popper.min.js"></script>
		<!-- Bootstrap core JavaScript -->
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>
		<!-- MDB core JavaScript -->
		<script type="text/javascript" src="/js/mdb.min.js"></script>
</html>
